<template name="adminActions">
  <div class="container">
    {{#if currentUser}}
      <div class="row">
        <div class="col s12">
          <h2>Refresh images and db</h2>
        </div>
      </div>
      <div class="row">
        <div class="col s4">
          <button id="rebuild-nodes" class="btn waves-effect waves-light">
            Node
          </button>
        </div>
        <div class="col s4">
          <button id="rebuild-v8" class="btn waves-effect waves-light">
            V8
          </button>
        </div>
        <div class="col s4">
          <button id="clear" class="btn waves-effect waves-light">
            hide
          </button>
        </div>
      </div>
      <div class="row">
        <div class="col s4">
          <button id="delete" class="btn waves-effect waves-light">
            delete
          </button>
        </div>
        <div class="col s4">
          <button id="validate" class="btn waves-effect waves-light">
            validate
          </button>
        </div>
      </div>
      <div class="row">
        <div class="col s12">
          <h2>Logs</h2>
          <ul class="collapsible" data-collapsible="expandable">
            {{#each logs}}{{collapsible}}
              <li>
                <div class="collapsible-header">
                  <code>{{isoTime time}}</code> {{title}}
                  <div class="right fs10">{{queue}}</div>
                </div>
                <div class="collapsible-body">
                  <div class="blue-grey lighten-4">
                    {{#if message}}<pre class="log-lines">{{message}}</pre>{{/if}}
                    {{#if stderr}}<pre class="log-lines">{{stderr}}</pre>{{/if}}
                    {{#if steps}}
                      <ul class="collapsible" data-collapsible="expandable">
                        {{#each steps}}{{collapsible}}
                          <li>
                            <div class="collapsible-header">
                              {{step}}
                            </div>
                            <div class="collapsible-body">
                              <div class="blue-grey lighten-4">
                                <pre class="log-lines">{{body}}</pre>
                              </div>
                            </div>
                          </li>
                        {{/each}}
                      </ul>
                    {{else}}
                      <pre class="log-lines">{{stdout}}</pre>
                    {{/if}}
                    {{#if (jsonContent miscJSON)}}<pre class="log-lines">{{miscJSON}}</pre>{{/if}}
                  </div>
                </div>
              </li>
            {{/each}}
          </ul>
        </div>
      </div>
    {{else}}
      <div class="row">
        <div class="col s12">
          {{> loginButtons}}
        </div>
      </div>
    {{/if}}
  </div>
</template>
