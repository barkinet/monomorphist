<template name="queue">
  <ul class="collection job-queue new-btn-wrapper">
    <button id="new-btn" class="collection-item center new-btn">New job <i class="fa fa-angle-right" aria-hidden="true"></i></button>
  </ul>
  {{#if Template.subscriptionsReady}}
    <ul class="collection job-queue">
      {{#each jobs}}
        {{#if (detail this)}}
          <li class="collection-item queue-item details" data-id="{{ this._id }}">
            <div class="job-link">
              <p>
                {{shortIdTitle this}}
              </p>
            </div>
            {{#each (sortAndAugment nodesStatus)}}
              <div class="row">
                {{#each this}}
                  {{#if good}}
                    <div class="col s6 color-good">
                      <i class="fa fa-check" aria-hidden="true"></i> {{ version }}
                    </div>
                  {{/if}}
                  {{#if bad}}
                    <div class="col s6 color-bad">
                      <i class="fa fa-exclamation-circle" aria-hidden="true"></i> {{ version }}
                    </div>
                  {{/if}}
                  {{#if unsure}}
                    <div class="col s6 color-unsure">
                      <i class="fa fa-question-circle" aria-hidden="true"></i> {{ version }}
                    </div>
                  {{/if}}
                  {{#if killed}}
                    <div class="col s6 color-killed">
                      <i class="fa fa-ban" aria-hidden="true"></i> {{ version }}
                    </div>
                  {{/if}}
                {{/each}}
              </div>
            {{/each}}
          </li>
        {{else}}
          <li class="collection-item queue-item {{#if listed}}listed{{/if}}" data-id="{{ _id }}">
            {{#let counts=(verdicts nodesStatus)}}
              <span class="short-id">{{ shortId this }}</span>
              <span class="verdicts">
                {{#if (status this 'running')}}
                  {{ nodesStatus.length }} <i class="fa fa-cog" aria-hidden="true"></i>
                {{/if}}
                {{#if counts.good }}
                  <span class="color-good">
                    {{ counts.good }} <i class="fa fa-check" aria-hidden="true"></i>
                  </span>
                {{/if}}
                {{#if counts.bad }}
                  <span class="color-bad">
                    {{ counts.bad }} <i class="fa fa-exclamation-circle" aria-hidden="true"></i>
                  </span>
                {{/if}}
                {{#if counts.unsure }}
                  <span class="color-unsure">
                    {{ counts.unsure }} <i class="fa fa-question-circle" aria-hidden="true"></i>
                  </span>
                {{/if}}
                {{#if counts.killed }}
                  <span class="color-killed">
                    {{ counts.killed }} <i class="fa fa-ban" aria-hidden="true"></i>
                  </span>
                {{/if}}
                <!--{{#if (killed this)}}<i class="fa fa-cog" aria-hidden="true"></i>{{/if}}-->
              </span>
            {{/let}}
          </li>
        {{/if}}
      {{/each}}
    </ul>
  {{/if}}
</template>
